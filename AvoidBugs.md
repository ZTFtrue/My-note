# 从一些小细节避免bug的发生, 提高开发体验

## 变量

1. 变量初始化,尽量不要为空,或者让变量处于未知状态.
2. 变量类型明确,就算不是强类型语言,也不要随心所欲的变换类型.
3. 变量表达的实际用途含义一致,且类型内容一致. 比如性别的表示, 不要```0,1,"男","女","Male","Female"```混用
4. 少使用魔法值或硬编码,除非是极其通用的. 比如可以这样表示性别: ```const male=0;female=1```.
5. 同样的字段, 在同一功能中尽量不要表达不同的意义. 比如: 在列表页面,每个item的```height```表示一种含义, 在进入item的详情时也应该表达同一种含义.
6. 有些情况不要用`null`(或者`undefined`)表示实际含义. 比如性别的表示, 不要用```0```或者````null```表示"男",1表示"女". 当然null可以表示未知, 但在复杂的情况下,可能会忘记判断null.
7. 变量名尽量见名知意.
8. 不要各种命名法乱换. 比如, 一会 Code 和 code.
9. 不要使用硬编码,例如 `int a =c+101` 没人知道101是什么.

## 方法(函数)

1. 函数也尽量不要返回null, 同样尽量见名知意

## 代码

1. 使用好的编辑器, 注意编辑器的警告, 尽量修复(这可以避免大部分空指针异常和内存泄漏).
2. 做好异常考虑.
3. 宁可没有注释, 也不要有错误的注释.
4. 代码风格统一, 不要什么风格都有.
5. 谨慎使用递归,单例.
6. 永远要判断用户输入的内容是否符合要求, 尤其是后端服务器开发.

## 后台

1. 返回数据格式要统一, 有些项目自己包装一层data,code. 然后在返回错误时,就乱了规则了,有时用了http状态码, 有时又用了自己定义的状态码.
2. 在操作服务器时, 特别注意接口的重放攻击.
3. 异常就是异常, 不要异常也返回正确, 然后在data做处理.
4. 传到客户端的数据尽量不要为null, 一是减少exception的发生, 二是在没有文当时方便客户端判断类型, 比如你传的值为null, 客户端无法判断你是arrary 还是String. (一般情况null 和 length=0 在客户端显示效果一样)

## Java

1. hash map 自定义对象做key时要重写 hashcode/equal

## 其它

1. 做之前先思考,再做. 抽象需求, 抽象代码.这样方便cv(copy,paste)大法. 思考可能会浪费时间, 不思考一定会浪费时间.
2. 单元测试(其实很多公司/个人都做不到, 在此也不强调这个)
3. sleep 的时间不会准确, 所以需要大于等于类似的方法判断.

## 分析BUG

1. 在log不明确的情况下, 分开功能模块, 分析在哪个模块出现的可能性高.
