# 正则表达式

1. __POSIX__ linux 自带正则表达是库.
2. __PCRE__   是perl的正则表达式库

贪婪匹配

```reg
\[.*?\]
```

## POSIX 使用

### 字符集

* 符号"." 用以匹配除换行符之外的任意一个字符.
* 方括号"[]" 用于指定一个字符集，只匹配其中的一个字符. 如: [abc] 只匹配 a、b、c ,不能匹配 bc、ab、abc组合.
* 连字符“-” 用于描述一个范围，如:  
  1. [a-z] 用于匹配小写字母(连接a-z).
  2. [a-zA-Z] 用于匹配大写字母.
  3. [0-9] 匹配数字
* 分隔符“\\<”、“\\>”，用以严格的匹配单词
  > 正则表达式的单词指的是由两侧非单词字符分割的字符串，非单词字符指的是字母、数字、下划线以外的任何字符.

### 字符类

POSIX 风格的正则表达式还提供了预定义字符类来匹配某些特定的字符.

|字符类|匹配字符|
|:---:|:---|
[[:alnum:]]  | 文字、数字字符
[[:alpha:]]  | 字母字符
[[:lower:]]  | 小写字母
[[:upper:]]  | 大写字母
[[:digit:]]  | 小数
[[:xdigit:]] | 16进制数字
[[:punct:]]  | 标点符号
[[:blank:]]  | 制表符和空格
[[:space:]]  | 空格
[[:cntrl:]]  | 所有控制符
[[:print:]]  | 所有可以打印的字符
[[:graph:]]  | 除空格外所有可以打印的字符

### 位置匹配

 "^"和"$" 分别匹配以某个字符开始和以某个字符结尾的行. 如: "^a[a-z]t$" 表示 匹配以a开头、以t结尾，且a和t之间有一个小写字母的行.
"^"和"$"不需要同时使用，“$^"不会报错，也不会输出任何内容

### 字符转义

符号"." 用以匹配除换行符之外的任意一个字符，那么如何匹配符号”."?转义字符”\"取消所有元字符的特殊含义，使用“\\."匹配符号”.". 如果要匹配“\\" 使用 ”\\\\“.
字符转义在编码中经常使用的，比如字符串中的引号“"”.

```java
 // java 示例
 System.out.println("Hello World \"你好世界\"");
 // 结果: 
 // Hello World "你好世界"
```

### 重复

有时候希望某些字符能够不止一次地出现，正则表达式中的符号 “*” 表示应该重复0次或者多次.

```sh
#经典例子
sudo rm -rf /* #谨慎执行，后果自负，建议不要执行
```

"+"和"?"与“*"有一点类似，"+"指定重复1次或更多次. "?"指定
重复0次或1次.

```js
0 <= "?" < 1 <= "+" <= ∞
```

花括号"{}",可以明确指定模式重复的次数.

|字符类|匹配字符|
|:---:|:---|
{n}|重复n次
{n,}|重复大于等于n次
{n,m}|重复n到m次(包括n和m)

例如, {3}表示重复3次, {3,}表示重复3次或者更多次, {5,12)则表示重复的次数不少于5次,不多于12次.

### 子表达式(分组)

“子表达式”也被称为“分组”，计算a+b之和称c的积,必须用“()”把a+b括起来.
正则表达式“(or){2,)"匹配所有or重复2次或更多次的行. 如果去掉or两边的括号,匹配的将是字母"r"后面紧跟两个或更多个字母r的行.

### 分支(或者)

如果表示 ”a“ 或 ”b" 都可以，使用字符“|” 表示 “或”.

```js
 (^https://)|(^http://)
 ```

### 反义

有时候会需要只要不是“它”就行，这需要”反义“.

```sh
[^a]   # 表示只要不是 y 就行
[^abcd] # 除了a、b、c、d 其它都行
```

> 反义必须用”[]“包括起来，否则就是[位置匹配](#位置匹配)的匹配开头.

```js
^[^y]
```

### 逆向引用

在子表达式(分组)中捕获的内容可以在正则表达式中的其他地方再次使用,用户可以使用反斜杠"\"加上子表达式的编号来指代该分组匹配到的内容.

```sh
(\<.*\>).?(  )*\1
```

上面这行正则表达式匹配所有在某个单词出现后,紧跟着0个或1个标点符号,以及任意个空格之后再次出现这个单词的行，如"abc abc". 便于理解,下面对这个正则表达式断句做些解释.

|字符类|匹配字符|
|:---:|:---|
| (\<.*\>) | 匹配任意长度的单词. _第1个子表达式. _ |
| ? | 匹配0个或1个，在这里只能匹配标点. 参考 [字符集](#字符集)-分隔符 |
| (  ) | *匹配0个或多个空格. _第2个子表达式_ |
| \1 | 指代第1个子表达式匹配到的模式(单词). 如果第1个子表达式匹配到单词abc.那么这里也自动成为abc |

也可以使用\2 、\3,来指代编号为2、3……的子表达式匹配到的模式. 子表达式的编号规则是:从左至右,第1个出现的子表达式编号为1,第2个编号为2,依次类推.

---
eg:

```sh
^[0-9]+abc$ # 匹配以数字开头，并以 abc 结尾的字符串

# [0-9]+匹配多个数字， [0-9] 匹配单个数字，+ 匹配一个或者多个. 

# abc$匹配字母 abc 并以abc 结尾, $ 为匹配输入字符串的结束位置. 
```

---
